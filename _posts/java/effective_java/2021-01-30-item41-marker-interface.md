---
title: "[Effective Java] Item 41. 정의하려는 것이 타입이라면 마커 인터페이스를 사용하라"
excerpt: "마커 인터페이스는 컴파일타임에 오류를 잡아낼 수 있다."
categories:
  - Java
tags:
  - Java
  - Effective Java
date: 2021-01-30
last_modified_at: 2021-01-30
---

## 1. 마커 인터페이스(Marker Interface)

마커 인터페이스란 아무 메서드도 담고 있지 않고 단지 자신을 구현하는 클래스가 특정 속성을 가짐을 표시해주는 인터페이스이다.

* Serializable 인터페이스는 자신을 구현한 클래스의 인스턴스가 ObjectOutputStream을 통해 Write(즉, 직렬화)할 수 있음을 알려준다.

### 1.1. 마커 애너테이션 대비 장점

마커 인터페이스는 이를 구현한 클래스의 인스턴스들을 구분하는 타입으로 쓸 수 있다.

* 마커 인터페이스는 타입이기 때문에 마커 애너테이션을 사용했다면 런타임에 발견될 오류를 컴파일타임에 잡을 수 있다.
  * ObjectOutputStream의 ``write()`` 메서드는 인수로 받은 객체가 당연히 Serializable을 구현했을 것이라고 가정한다.
    * 그러나 인수로 Serializable이 아닌 Object 객체를 받도록 잘못 설계되어 있다.
    * 직렬화 할 수 없는 객체를 받아도 컴파일타임이 아닌 런타임에서야 문제를 확인할 수 있다.
    * 마커 인터페이스의 이점을 잘 못 살린 케이스이다.

마커 인터페이스는 적용 대상을 세밀하게 지정할 수 있다.

* @Taregt을 ``ElementType.TYPE``으로 선언한 애너테이션은 모든 타입(클래스, 인터페이스, 애너테이션, 열거)에 달 수 있다.
  * 세밀한 컨트롤이 불가능하다.
* 마커 인터페이스의 경우?
  * 마킹하고 싶은 클래스는 해당 인터페이스를 확장하기만 하면 된다.
  * 마킹된 타입은 자동으로 그 인터페이스의 하위 타입임이 보장된다.

<br>

## 2. 마커 애너테이션의 장점

마커 애너테이션은 반대로 거대한 애너테이션 시스템의 지원을 받는다. 애너테이션을 적극 활용하는 프레임워크는 오히려 마커 애너테이션을 사용하는 것이 일관성을 위해 낫다.

* 클래스나 인스턴스 이외의 프로그램 요소(패키지, 모듈, 필드, 지역변수 등)는 마킹할 때 애너테이션을 쓸 수밖에 없다.
* 마킹된 객체를 매개변수로 받는 메서드를 작성할 일이 있으면 마커 인터페이스를 활용한다.
  * 컴파일타임에 오류를 잡아낼 수 있다.
  * 작성할 일이 없음을 확신한다면 마커 애너테이션이 더 나은 선택일 것이다.

<br>

---

## Reference

* Effective Java 3/E(Joshua Bloch 저)
