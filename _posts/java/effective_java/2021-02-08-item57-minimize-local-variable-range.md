---
title: "[Effective Java] Item 57. 지역변수의 범위를 최소화하라"
excerpt: "지역변수의 범위를 줄이는 가장 강력한 기법은 '가장 처음 쓰일 때 선언하기'다."
categories:
  - Java
tags:
  - Java
  - Effective Java
date: 2021-02-08
last_modified_at: 2021-02-08
---

## 1. 지역변수의 범위

지역변수의 유효 범위를 최소로 줄이면 코드 가독성과 유지보수성이 높아지고 오류 가능성은 낮아진다.

지역변수의 범위를 줄이는 가장 강력한 기법은 '가장 처음 쓰일 때 선언하기'다. 미리 선언해두면 가독성이 떨어지며, 변수를 실제 사용하는 시점엔 타입과 초깃값이 기억나지 않을 수 있다.

지역 변수를 생각없이 선언하다 보면 실제 쓰이는 범위보다 너무 앞서 선언하거나, 다 쓴 뒤에도 여전히 살아있게 된다. 의도한 범위 밖에서 변수를 사용하게 되면 끔찍한 결과로 이어진다.

거의 모든 지역변수는 선언과 동시에 초기화해야 한다. 초기화에 필요한 정보가 충분하지 않으면 추운해질 때까지 선언을 미뤄야 한다.

* try-catch문은 예외다.
  * 변수를 초기화하는 표현식에서 검사 예외를 던질 가능성이 있다면 try 블록에서 초기화해야 한다.
  * 변수 값을 try 블록 바깥에서도 사용해야 한다면 try 블록 앞에서 선언해야 한다.

<br>

## 2. 반복문

반복문에서는 반복 변수의 범위가 반복문의 몸체, 그리고 for 키워드와 몸체 사이의 괄호 안으로 제한된다. 따라서 반복 변수의 값을 반복문이 종료된 뒤에도 써야 하는 상황이 아니라면 while 문 보다 for 문이 낫다.

> Payment.java

```java
for (int i = 0, n = expensiveComputation(); i < n; i++) {
}
```

반복 여부를 결정짓는 변수 i의 한계값을 변수 n에 미리 저장해두고, 반복 때마다 다시 계산해야 하는 비용을 없앤다. while 문보다 짧아서 가독성이 좋다.

<br>

## 3. 메서드 분리

지역변수 범위를 최소화하는 마지막 방법은 메서드를 작게 유지하고 한 가지 기능에 집중하는 것이다.

* 한 메서드에서 여러 기능을 처리하면 한 기능의 지역변수가 다른 기능을 수행하는 코드에 접근하게 된다.
  * 메서드를 기능별로 쪼개면 해결할 수 있다.

<br>

---

## Reference

* Effective Java 3/E(Joshua Bloch 저)
