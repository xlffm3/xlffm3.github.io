---
title: "[Effective Java] Item 66. 네이티브 메서드는 신중히 사용하라"
excerpt: "네이티브 언어는 안전하지 않아서 네이티브 메서드를 사용하는 어플리케이션도 메모리 훼손 오류 위험이 있다."
categories:
  - Java
tags:
  - Java
  - Effective Java
date: 2021-02-09
last_modified_at: 2021-02-09
---

## 1. 네이티브 메서드

네이티브 메서드란 C나 C++ 같은 네이티브 프로그래밍 언어로 작성한 메서드이다. 네이티브 인터페이스를 통해 네이티브 메서드를 호출할 수 있다.

* 레지스트리 같은 플랫폼 특화 기능을 사용한다.
* 네이티브 코드로 작성된 기존 라이브러리를 사용한다.
* 성능 개선을 목적으로 성능에 영향을 주는 영역만 네이티브 언어로 작성한다.
* 플랫폼 특화 기능을 활용하려면 네이티브 메서드를 사용해야 한다.
  * Java가 발전하면서 OS 같은 하부 플랫폼 기능들을 흡수하고 있기 때문에 사용할 필요가 줄어들고 있다.

성능 개선을 목적으로 네이티브 메서드를 사용하는 것은 권장하지 않는다.

* Java 라이브러리들은 성능 튜닝을 통해 네이티브 구현보다 더 빨라지는 경우도 많다.
* 고성능 다중 정밀 연산이 필요하다면 네이티브 메서드를 통해 GMP를 사용하는 것을 고려하라.

네이티브 언어는 안전하지 않아서 네이티브 메서드를 사용하는 어플리케이션도 메모리 훼손 오류 위험이 있다.

* 네이티브 언어는 플랫폼을 많이 타서 이식성이 낮다.
* 디버깅도 어렵고 잘못 사용하면 성능이 더 떨어진다.
* GC가 메모리 자동 회수를 하지 못하고 추적도 힘들다.
* 자바 코드와 네이티브 코드 경계를 넘나들 때마다 비용이 발생한다.
  * 네이티브 코드와 자바 코드 사이의 접착 코드를 작성해야 한다.
* 네이티브 코드는 최소한으로 사용하고 철저히 테스트하라.

<br>

---

## Reference

* Effective Java 3/E(Joshua Bloch 저)
