---
title: "[Effective Java] Item 67. 최적화는 신중히 하라"
excerpt: "좋은 프로그램을 작성하다 보면 성능은 따라오게 마련이다."
categories:
  - Java
tags:
  - Java
  - Effective Java
date: 2021-02-09
last_modified_at: 2021-02-09
---

## 1. 최적화의 오해

> 그 어떤 핑계보다 효율성이라는 이름 아래 행해진 컴퓨팅 죄악이 더 많다. 심지어 효율을 높이지 못하면서.

빠른 프로그램보다는 좋은 프로그램을 작성하라. 어설픈 최적화는 더 빠르지 않고 수정하기 어려운 아키텍쳐가 된다. 좋은 프로그램은 아키텍쳐 자체가 최적화할 수 있는 길을 안내해준다. 구현상의 문제는 나중에 최적화할 수 있지만 아키텍쳐의 결함이 성능을 제한하면 시스템 전체를 다시 작성하지 않고는 해결하기 어렵다.

* 성능을 제한하는 설계를 피하라.
  * 컴포넌트끼리 혹은 외부 시스템과의 소통 방식은 완성 후 변경하기 어려운 설계 요소이다.
  * API, 네트워크 프로토콜, 영구 저장용 데이터 포맷 등.
* API를 설계할 때 성능에 주는 영향을 고려한다.
  * 캡슐화와 조합 및 인터페이스를 사용한다.
* 성능을 위해 API를 왜곡하는 건 매우 안 좋다.
  * 성능은 추후에 해결되어도 왜곡된 API를 지원해야 하는 비용이 수반된다.

<br>

## 2. 최적화를 하려면

각각의 최적화 시도 전후로 성능을 측정해야 해보고 최적화를 적용할지 고민해야 한다. 프로파일링 도구나 벤치마킹 프레임워크를 통해 코드에서 어떤 최적화 노력을 어디에 집중해야 할지 찾는다.

* 프로그램에서 개별 메서드의 소비 시간 및 호출 횟수 등의 런타임 정보를 제공한다.
* Java는 성능 모델이 덜 정교해 작성 코드와 CPU에서 수행하는 명령 사이의 추상화 격차가 크다.
  * 최적화로 인한 성능 변화를 일정하게 예측하기 어렵다.
  * 프로그램을 여러 Java 플랫폼이나 하드웨어 플랫폼에서 구동한다면 최적화 효과를 그 각각에서 측정해야 한다.

<br>

---

## Reference

* Effective Java 3/E(Joshua Bloch 저)
