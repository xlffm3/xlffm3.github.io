---
title: "IP(Internet Protocol)"
categories:
  - Network
tags:
  - Network
toc: true
toc_sticky: true
last_modified_at: 2020-05-16T08:30:00-05:00
---

## 1. IP(Internet Protocol)

* Layer 3 계층 프로토콜이며, IP는 로컬 환경에서 리모트 환경으로 데이터 전송을 담당한다.
* 경로를 선출하고, 선출된 최적의 경로를 이용하여 데이터 전송을 담당한다.
* UDP와 마찬가지로 비연결 지향성 프로토콜(Connectionless Service)이며 Best Effort Service를 지향하기 때문에 신뢰성은 제공하지 않는다.

<br>

## 2. IP Header

![image](https://user-images.githubusercontent.com/56240505/77380714-35fa5200-6dbf-11ea-9922-e935b9bf769d.png) ![image](https://user-images.githubusercontent.com/56240505/77380739-490d2200-6dbf-11ea-9b69-2ec3c015a8a5.png)

* ① IP 프로토콜 버전을 표기하며, 이 때 버전은 IPv4와 IPv6가 존재한다.
* ② IP 헤더의 길이를 표기하며 20Byte에서 최대 60Byte이다.
* ③ 데이터 우선 순위 확인 : QOS(서비스 품질)에 대한 정보를 제공한다.
* ④ 데이터 길이 = 전체 길이 - 헤더 길이라는 식을 통해 IP 데이터그램 전체 길이를 Byte로 표기한다.
* ⑤ 호스트들 간에 전송하는 데이터를 표기하여, 데이터그램을 식별하는 역할을 한다.
* ⑥ IP 데이터그램 단편화에 대한 정보를 소유함으로써 IP 데이터그램이 분할될 수 있는지를 판단하고, 만약 분할된 경우 또 다른 분할된 IP 데이타그램이 있는지 검사한다.
*	⑦ 단편화된 데이터그램들을 하나의 데이터그램으로 합칠 때 전체 데이터그램에서의 위치를 표기한다.
* ⑧ IP 데이터그램이 지날 수 있는 라우터 개수에 대한 생존 시간을 기록하며, 생존 시간은 라우터를 지날때 마다 1씩 감소한다.
* ⑨ IP 데이터그램의 사용자 데이터에 표기된 상위 계층 프로토콜을 의미한다.
* ⑩ IP 헤더 손상 여부를 판단한다.
* ⑪, ⑫ 출발지, 목적지 IP 주소 필드이다.
* ⑬ 옵션 필드이다.
* 단편화란 전송할 데이터가 MTU보다 큰 경우 MTU 사이즈 단위로 분할하는 것을 뜻한다.

<br>

## 3. IP Address

* IP 주소는 네트워크 계층에서 사용하는 주소이며, IP 헤더에 포함된 데이터 주소이다.
* TCP/IP 프로토콜을 사용하는 컴퓨터, 프린터 또는 라우터 같은 호스트 디바이스를 식별하는 32bit 숫자를 의미한다.
* IPv4 주소의 경우, 8bit씩 끊은 네 개의 영역이 점으로 분리된 십진수 형식으로 표현된다.
* 각각의 8bit 섹션을 '옥텟'이라고 부른다.
* 인터넷 사용자의 증가로 인해 주소 공간의 고갈에 대한 우려가 높아지면서, 이에 따른 대안으로 128bit 주소 체계를 갖는 IPv6가 등장했다.

<br>

## 4. IPv4의 데이터 전송 방식

1. Unicast
	* 서버와 클라이언트간 일-대-일 데이터 전송 서비스를 뜻한다.
	* 사용자에게 가장 신뢰적인 서비스인 반면, 다수의 클라이언트를 갖고 있는 멀티미디어 서비스 환경에서는 서버 부하 발생 및 네트워크 대역폭 고갈 이슈를 야기시킬 수 있다.
	* 일반적으로 인터넷, ICMP에서 유니캐스트 서비스를 실시한다.
2. Broadcast
	* 서버와 클라이언트간 일-대-불특정 다수 데이터 전송 서비스를 뜻한다.
	* 브로드캐스트로 데이터를 전송하면 유니캐스트 서비스에서 발생하는 이슈들을 해결할 수 있다.
	* 불특정 다수 대상으로 전송되는 서비스이기 때문에 수신을 원치 않는 클라이언트도 수신하는 문제가 발생하며, 갑작스런 브로드캐스트 증가는 LAN 네트워크 성능 저하를 유발한다.
	* 방송국 및 ARP 요청 등이 브로드캐스트 서비스를 실시한다.
3. Multicast
	* 서버와 클라이언트간 일-대-불특정 다수 데이터 전송 방식이긴 하지만, 데이터 수신을 원하는 특정 그룹들에게만 데이터를 전송하는 서비스이다.
	* 멀티캐스트는 유니캐스트 및 브로드캐스트로 인해 발생하는 이슈들을 해결할 수 있어, 화상회의 등 멀티미디어 서비스 환경에서 주로 사용한다.

<br>

## 5. Network Name

* 네트워크 이름은 네트워크 아이디의 호스트 부분이 모두 0인 주소를 말한다.
* 이 주소는 네트워크를 표기하거나 라우팅 경로로 사용하기 위해서 예약된 값이기 때문에 인터페이스 설정이 불가능하다.
* 192.168.1.1/24라는 주소의 네트워크 아이디는 192.168.1이며 뒤에 8bit는 호스트 아이디이다.
* 이 때 호스트 아이디 전체가 0인 주소 즉 192.168.1.0을 네트워크 이름이라고 한다.
* 하나의 네트워크는 라우터를 거치지 않고도 통신이 가능한 영역이며, 네트워크 부분은 모두 같지만 호스트 부분은 모두 달라야 정상적인 통신이 일어난다.

<br>

## 6. Subnet Broadcast Address

* 서브넷 브로드케스트 주소는 네트워크 아이디의 호스트 부분이 모두 1인 주소를 말한다.
* 이 주소는 네트워크에서 브로드케스트를 실시할 때 예약된 값이기 때문에 인터페이스에 설정이 불가능하다.
* 192.168.1.1/24라는 주소의 네트워크 아이디는 192.168.1이며 뒤에 8bit는 호스트 아이디이다.
* 이 때 호스트 아이디 전체가 1인 주소 즉 192.168.1.255를 서브넷 브로드케스트 주소라고 한다.

<br>

## 7. IP Address Class

* IP 주소의 범위는 0.0.0.0 ~ 255.255.255.255까지 포함되며, 5개의 클래스로 정의함으로써 IP 주소 낭비 방지와 효율적인 서브넷 관리가 가능하다.
* 클래스에 따라서 네트워크 부분 및 호스트 부분이 다르게 나누어지는데, 이는 네트워크 크기 및 하나의 네트워크가 가용할 수 있는 호스트의 수를 기준으로 한다.

### 7.1. A Class(Unicast Address)

* 첫 번째 옥텟을 2진수로 변환할 경우 맨 앞에 0이라는 공통 bit를 갖는다면 A Class로 정의한다.
* 00000000 ~ 01111111(0부터 127까지)이 A Class에 포함된다.
* A Class가 사용하는 기본 서브넷 마스크는 255.0.0.0이며 호스트 아이디가 24bit이므로 네트워크 아이디당 나올 수 있는 IP 주소 개수는 2^24개 즉 16,777,216개가 된다.

### 7.2.	B Class(Unicast Address)

* 첫 번째 옥텟을 2진수로 변환할 경우 맨 앞에 10이라는 공통 bit를 갖는다면 B Class로 정의한다.
* 10000000 ~ 10111111(128부터 191까지)이 B Class에 포함된다.
* B Class가 사용하는 기본 서브넷 마스크는 255.255.0.0이며 호스트 아이디가 16bit이므로 네트워크 아이디당 나올 수 있는 IP 주소 개수는 2^16개 즉 65,536개가 된다.

### 7.3. C Class(Unicast Address)

* 첫 번째 옥텟을 2진수로 변환할 경우 맨 앞에 110이라는 공통 bit를 갖는다면 C Class로 정의한다.
* 11000000 ~ 11011111(192부터 223까지)이 C Class에 포함된다.
* C Class가 사용하는 기본 서브넷 마스크는 255.255.255.0이며 호스트 아이디가 8bit이므로 네트워크 아이디당 나올 수 있는 IP 주소 개수는 2^8개 즉 256개가 된다.


### 7.4. D Class(Multicast Address)

* 첫 번째 옥텟을 2진수로 변환할 경우 맨 앞에 1110이라는 공통 bit를 갖는다면 D Class로 정의한다.
* 11100000 ~ 11101111(224부터 239까지)이 D Class에 포함된다.
* D Class는 멀티캐스트 주소로 예약되어 있으며 서브넷 마스크를 이용하여 블락 단위로 동작하지 않기 때문에 서브넷 마스크를 사용하지 않는다.

### 7.5.	E Class(Broadcast Address)

* 첫 번째 옥텟을 2진수로 변환할 경우 맨 앞에 1111이라는 공통 bit를 갖는다면 E Class로 정의한다.
* 11110000 ~ 11111111(240부터 255까지)이 E Class에 포함된다.
* E Class는 IANA에서 사용을 제한 시킨 주소이기 때문에 네트워크 인터페이스에 설정이 불가능하다.

<br>

## 8. Public & Private IP Address

* 공인 IP 주소는 인터넷과 같은 공인 환경에 직접 연결이 가능한 주소를 말한다.
* 즉, 인터넷을 하기 위해서는 공인 IP 주소가 필요하며 이 주소는 ISP 업체로부터 임대를 받아서 사용해야 한다.
* 사설 IP 주소는 공인 환경이 아닌 기업 내부 사설 환경에서 사용을 권장하는 주소이다.
* 이 주소는 인터넷과 연결되지 않기 때문에 다른 환경과 중첩하여 주소 범위를 사용해도 무관하며 ISP 업체로부터 임대를 받지 않아도 사용할 수 있다.
* WAN 구간을 연결하는 Router는 사설 IP 주소를 외부로 전송할 수 없다.

<br>

---

## Reference

* [IP 주소 및 서브넷마스크](https://m.blog.naver.com/PostView.nhn?blogId=hatesunny&logNo=220790654612&proxyReferer=https%3A%2F%2Fwww.google.com%2F)
* [서브넷팅](https://m.blog.naver.com/hatesunny/220792560549)
* [IP? IP 헤더](https://m.blog.naver.com/hatesunny/220790332650)
